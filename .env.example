# GraphRAG MCP Configuration
# Copy this to .env and customize for your setup

# ===========================================
# LLM PROCESSING CONFIGURATION
# ===========================================

# Ollama Model Settings
OLLAMA_LLM_MODEL=llama3.1:8b
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_CONTEXT_WINDOW=400000
OLLAMA_OUTPUT_BUFFER=30000
OLLAMA_TEMPERATURE=0.1
OLLAMA_MAX_TOKENS=4096

# ===========================================
# CHUNKING CONFIGURATION  
# ===========================================

# Optimal chunk size (calculated as CONTEXT_WINDOW - OUTPUT_BUFFER)
OPTIMAL_CHUNK_SIZE=370000
CHUNK_OVERLAP=25000

# Chunk separators (comma-separated, in priority order)
CHUNK_SEPARATORS="\n\n\n,\n\n,\n,. , ,"

# ===========================================
# ENTITY EXTRACTION CONFIGURATION
# ===========================================

# Target entity count for quality assessment
MIN_ENTITIES_EXPECTED=15
MAX_ENTITIES_EXPECTED=50

# Confidence thresholds
MIN_ENTITY_CONFIDENCE=0.7
MIN_CITATION_CONFIDENCE=0.5
MIN_RELATIONSHIP_CONFIDENCE=0.6

# ===========================================
# PROCESSING TIMEOUTS
# ===========================================

# Dynamic timeouts based on content size
SMALL_CONTENT_TIMEOUT=30
MEDIUM_CONTENT_TIMEOUT=60  
LARGE_CONTENT_TIMEOUT=180
MAX_PROCESSING_TIMEOUT=600

# Retry configuration
MAX_JSON_PARSE_RETRIES=2
MAX_CONSECUTIVE_FAILURES=3

# ===========================================
# ENTITY EXTRACTION PROMPT TEMPLATE
# ===========================================

# Main entity extraction prompt (multiline supported with \n)
ENTITY_EXTRACTION_PROMPT="TASK: Extract entities and citations from this academic document.\n\nFOCUS ON:\n- Authors and researchers\n- Key concepts and theories  \n- Methods and technologies\n- Organizations and institutions\n- Important measurements and materials\n\nEXTRACT 15-30 entities for literature review quality.\n\nCONTENT: {content}\n\nReturn ONLY this JSON:\n\n{\n  \"entities\": [\n    {\n      \"id\": \"entity_1\",\n      \"name\": \"Entity Name\",\n      \"type\": \"concept\"\n    }\n  ],\n  \"citations\": [\n    {\n      \"text\": \"Author et al. (2023)\",\n      \"authors\": [\"Author\"],\n      \"year\": 2023\n    }\n  ],\n  \"relationships\": []\n}"

# ===========================================
# DATABASE CONFIGURATION
# ===========================================

# Neo4j Settings
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=password
NEO4J_DATABASE=neo4j

# ChromaDB Settings  
CHROMADB_PERSIST_DIR=chroma_graph_db
CHROMADB_COLLECTION_NAME=graphrag_citations

# ===========================================
# PERFORMANCE TUNING
# ===========================================

# Embedding batch size
EMBEDDING_BATCH_SIZE=10

# Processing mode
PROCESSING_MODE=sequential

# Enable/disable features for performance
ENABLE_ENTITY_ENHANCEMENT=false
ENABLE_GRAPHITI_SYNC=false
ENABLE_RELATIONSHIP_EXTRACTION=true

# ===========================================
# LOGGING AND MONITORING
# ===========================================

# Log levels: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO
ENABLE_PERFORMANCE_LOGGING=true
ENABLE_ENTITY_COUNT_WARNINGS=true

# ===========================================
# HARDWARE-SPECIFIC SETTINGS
# ===========================================

# Mac-specific optimizations
MAC_THERMAL_THROTTLE_DELAY=0
MAC_MEMORY_LIMIT_GB=8
ENABLE_MAC_OPTIMIZATIONS=true